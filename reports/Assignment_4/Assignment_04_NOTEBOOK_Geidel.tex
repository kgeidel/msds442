\documentclass[11pt]{article}

    \usepackage[breakable]{tcolorbox}
    \usepackage{parskip} % Stop auto-indenting (to mimic markdown behaviour)
    

    % Basic figure setup, for now with no caption control since it's done
    % automatically by Pandoc (which extracts ![](path) syntax from Markdown).
    \usepackage{graphicx}
    % Keep aspect ratio if custom image width or height is specified
    \setkeys{Gin}{keepaspectratio}
    % Maintain compatibility with old templates. Remove in nbconvert 6.0
    \let\Oldincludegraphics\includegraphics
    % Ensure that by default, figures have no caption (until we provide a
    % proper Figure object with a Caption API and a way to capture that
    % in the conversion process - todo).
    \usepackage{caption}
    \DeclareCaptionFormat{nocaption}{}
    \captionsetup{format=nocaption,aboveskip=0pt,belowskip=0pt}

    \usepackage{float}
    \floatplacement{figure}{H} % forces figures to be placed at the correct location
    \usepackage{xcolor} % Allow colors to be defined
    \usepackage{enumerate} % Needed for markdown enumerations to work
    \usepackage{geometry} % Used to adjust the document margins
    \usepackage{amsmath} % Equations
    \usepackage{amssymb} % Equations
    \usepackage{textcomp} % defines textquotesingle
    % Hack from http://tex.stackexchange.com/a/47451/13684:
    \AtBeginDocument{%
        \def\PYZsq{\textquotesingle}% Upright quotes in Pygmentized code
    }
    \usepackage{upquote} % Upright quotes for verbatim code
    \usepackage{eurosym} % defines \euro

    \usepackage{iftex}
    \ifPDFTeX
        \usepackage[T1]{fontenc}
        \IfFileExists{alphabeta.sty}{
              \usepackage{alphabeta}
          }{
              \usepackage[mathletters]{ucs}
              \usepackage[utf8x]{inputenc}
          }
    \else
        \usepackage{fontspec}
        \usepackage{unicode-math}
    \fi

    \usepackage{fancyvrb} % verbatim replacement that allows latex
    \usepackage{grffile} % extends the file name processing of package graphics
                         % to support a larger range
    \makeatletter % fix for old versions of grffile with XeLaTeX
    \@ifpackagelater{grffile}{2019/11/01}
    {
      % Do nothing on new versions
    }
    {
      \def\Gread@@xetex#1{%
        \IfFileExists{"\Gin@base".bb}%
        {\Gread@eps{\Gin@base.bb}}%
        {\Gread@@xetex@aux#1}%
      }
    }
    \makeatother
    \usepackage[Export]{adjustbox} % Used to constrain images to a maximum size
    \adjustboxset{max size={0.9\linewidth}{0.9\paperheight}}

    % The hyperref package gives us a pdf with properly built
    % internal navigation ('pdf bookmarks' for the table of contents,
    % internal cross-reference links, web links for URLs, etc.)
    \usepackage{hyperref}
    % The default LaTeX title has an obnoxious amount of whitespace. By default,
    % titling removes some of it. It also provides customization options.
    \usepackage{titling}
    \usepackage{longtable} % longtable support required by pandoc >1.10
    \usepackage{booktabs}  % table support for pandoc > 1.12.2
    \usepackage{array}     % table support for pandoc >= 2.11.3
    \usepackage{calc}      % table minipage width calculation for pandoc >= 2.11.1
    \usepackage[inline]{enumitem} % IRkernel/repr support (it uses the enumerate* environment)
    \usepackage[normalem]{ulem} % ulem is needed to support strikethroughs (\sout)
                                % normalem makes italics be italics, not underlines
    \usepackage{soul}      % strikethrough (\st) support for pandoc >= 3.0.0
    \usepackage{mathrsfs}
    

    
    % Colors for the hyperref package
    \definecolor{urlcolor}{rgb}{0,.145,.698}
    \definecolor{linkcolor}{rgb}{.71,0.21,0.01}
    \definecolor{citecolor}{rgb}{.12,.54,.11}

    % ANSI colors
    \definecolor{ansi-black}{HTML}{3E424D}
    \definecolor{ansi-black-intense}{HTML}{282C36}
    \definecolor{ansi-red}{HTML}{E75C58}
    \definecolor{ansi-red-intense}{HTML}{B22B31}
    \definecolor{ansi-green}{HTML}{00A250}
    \definecolor{ansi-green-intense}{HTML}{007427}
    \definecolor{ansi-yellow}{HTML}{DDB62B}
    \definecolor{ansi-yellow-intense}{HTML}{B27D12}
    \definecolor{ansi-blue}{HTML}{208FFB}
    \definecolor{ansi-blue-intense}{HTML}{0065CA}
    \definecolor{ansi-magenta}{HTML}{D160C4}
    \definecolor{ansi-magenta-intense}{HTML}{A03196}
    \definecolor{ansi-cyan}{HTML}{60C6C8}
    \definecolor{ansi-cyan-intense}{HTML}{258F8F}
    \definecolor{ansi-white}{HTML}{C5C1B4}
    \definecolor{ansi-white-intense}{HTML}{A1A6B2}
    \definecolor{ansi-default-inverse-fg}{HTML}{FFFFFF}
    \definecolor{ansi-default-inverse-bg}{HTML}{000000}

    % common color for the border for error outputs.
    \definecolor{outerrorbackground}{HTML}{FFDFDF}

    % commands and environments needed by pandoc snippets
    % extracted from the output of `pandoc -s`
    \providecommand{\tightlist}{%
      \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
    \DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
    % Add ',fontsize=\small' for more characters per line
    \newenvironment{Shaded}{}{}
    \newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.56,0.13,0.00}{{#1}}}
    \newcommand{\DecValTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\FloatTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\CharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\StringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\CommentTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textit{{#1}}}}
    \newcommand{\OtherTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{{#1}}}
    \newcommand{\AlertTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.02,0.16,0.49}{{#1}}}
    \newcommand{\RegionMarkerTok}[1]{{#1}}
    \newcommand{\ErrorTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\NormalTok}[1]{{#1}}

    % Additional commands for more recent versions of Pandoc
    \newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.53,0.00,0.00}{{#1}}}
    \newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.73,0.40,0.53}{{#1}}}
    \newcommand{\ImportTok}[1]{{#1}}
    \newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.73,0.13,0.13}{\textit{{#1}}}}
    \newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\VariableTok}[1]{\textcolor[rgb]{0.10,0.09,0.49}{{#1}}}
    \newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.40,0.40,0.40}{{#1}}}
    \newcommand{\BuiltInTok}[1]{{#1}}
    \newcommand{\ExtensionTok}[1]{{#1}}
    \newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.74,0.48,0.00}{{#1}}}
    \newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.49,0.56,0.16}{{#1}}}
    \newcommand{\InformationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\WarningTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \makeatletter
    \newsavebox\pandoc@box
    \newcommand*\pandocbounded[1]{%
      \sbox\pandoc@box{#1}%
      % scaling factors for width and height
      \Gscale@div\@tempa\textheight{\dimexpr\ht\pandoc@box+\dp\pandoc@box\relax}%
      \Gscale@div\@tempb\linewidth{\wd\pandoc@box}%
      % select the smaller of both
      \ifdim\@tempb\p@<\@tempa\p@
        \let\@tempa\@tempb
      \fi
      % scaling accordingly (\@tempa < 1)
      \ifdim\@tempa\p@<\p@
        \scalebox{\@tempa}{\usebox\pandoc@box}%
      % scaling not needed, use as it is
      \else
        \usebox{\pandoc@box}%
      \fi
    }
    \makeatother

    % Define a nice break command that doesn't care if a line doesn't already
    % exist.
    \def\br{\hspace*{\fill} \\* }
    % Math Jax compatibility definitions
    \def\gt{>}
    \def\lt{<}
    \let\Oldtex\TeX
    \let\Oldlatex\LaTeX
    \renewcommand{\TeX}{\textrm{\Oldtex}}
    \renewcommand{\LaTeX}{\textrm{\Oldlatex}}
    % Document parameters
    % Document title
    \title{Assignment\_04\_NOTEBOOK\_Geidel}
    
    
    
    
    
    
    
% Pygments definitions
\makeatletter
\def\PY@reset{\let\PY@it=\relax \let\PY@bf=\relax%
    \let\PY@ul=\relax \let\PY@tc=\relax%
    \let\PY@bc=\relax \let\PY@ff=\relax}
\def\PY@tok#1{\csname PY@tok@#1\endcsname}
\def\PY@toks#1+{\ifx\relax#1\empty\else%
    \PY@tok{#1}\expandafter\PY@toks\fi}
\def\PY@do#1{\PY@bc{\PY@tc{\PY@ul{%
    \PY@it{\PY@bf{\PY@ff{#1}}}}}}}
\def\PY#1#2{\PY@reset\PY@toks#1+\relax+\PY@do{#2}}

\@namedef{PY@tok@w}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.73,0.73}{##1}}}
\@namedef{PY@tok@c}{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.24,0.48,0.48}{##1}}}
\@namedef{PY@tok@cp}{\def\PY@tc##1{\textcolor[rgb]{0.61,0.40,0.00}{##1}}}
\@namedef{PY@tok@k}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@kp}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@kt}{\def\PY@tc##1{\textcolor[rgb]{0.69,0.00,0.25}{##1}}}
\@namedef{PY@tok@o}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\@namedef{PY@tok@ow}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\@namedef{PY@tok@nb}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@nf}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\@namedef{PY@tok@nc}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\@namedef{PY@tok@nn}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\@namedef{PY@tok@ne}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.80,0.25,0.22}{##1}}}
\@namedef{PY@tok@nv}{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\@namedef{PY@tok@no}{\def\PY@tc##1{\textcolor[rgb]{0.53,0.00,0.00}{##1}}}
\@namedef{PY@tok@nl}{\def\PY@tc##1{\textcolor[rgb]{0.46,0.46,0.00}{##1}}}
\@namedef{PY@tok@ni}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.44,0.44,0.44}{##1}}}
\@namedef{PY@tok@na}{\def\PY@tc##1{\textcolor[rgb]{0.41,0.47,0.13}{##1}}}
\@namedef{PY@tok@nt}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@nd}{\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\@namedef{PY@tok@s}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@sd}{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@si}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.64,0.35,0.47}{##1}}}
\@namedef{PY@tok@se}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.67,0.36,0.12}{##1}}}
\@namedef{PY@tok@sr}{\def\PY@tc##1{\textcolor[rgb]{0.64,0.35,0.47}{##1}}}
\@namedef{PY@tok@ss}{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\@namedef{PY@tok@sx}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@m}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\@namedef{PY@tok@gh}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\@namedef{PY@tok@gu}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.50,0.00,0.50}{##1}}}
\@namedef{PY@tok@gd}{\def\PY@tc##1{\textcolor[rgb]{0.63,0.00,0.00}{##1}}}
\@namedef{PY@tok@gi}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.52,0.00}{##1}}}
\@namedef{PY@tok@gr}{\def\PY@tc##1{\textcolor[rgb]{0.89,0.00,0.00}{##1}}}
\@namedef{PY@tok@ge}{\let\PY@it=\textit}
\@namedef{PY@tok@gs}{\let\PY@bf=\textbf}
\@namedef{PY@tok@ges}{\let\PY@bf=\textbf\let\PY@it=\textit}
\@namedef{PY@tok@gp}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\@namedef{PY@tok@go}{\def\PY@tc##1{\textcolor[rgb]{0.44,0.44,0.44}{##1}}}
\@namedef{PY@tok@gt}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.27,0.87}{##1}}}
\@namedef{PY@tok@err}{\def\PY@bc##1{{\setlength{\fboxsep}{\string -\fboxrule}\fcolorbox[rgb]{1.00,0.00,0.00}{1,1,1}{\strut ##1}}}}
\@namedef{PY@tok@kc}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@kd}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@kn}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@kr}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@bp}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\@namedef{PY@tok@fm}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\@namedef{PY@tok@vc}{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\@namedef{PY@tok@vg}{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\@namedef{PY@tok@vi}{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\@namedef{PY@tok@vm}{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\@namedef{PY@tok@sa}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@sb}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@sc}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@dl}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@s2}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@sh}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@s1}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\@namedef{PY@tok@mb}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\@namedef{PY@tok@mf}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\@namedef{PY@tok@mh}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\@namedef{PY@tok@mi}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\@namedef{PY@tok@il}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\@namedef{PY@tok@mo}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\@namedef{PY@tok@ch}{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.24,0.48,0.48}{##1}}}
\@namedef{PY@tok@cm}{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.24,0.48,0.48}{##1}}}
\@namedef{PY@tok@cpf}{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.24,0.48,0.48}{##1}}}
\@namedef{PY@tok@c1}{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.24,0.48,0.48}{##1}}}
\@namedef{PY@tok@cs}{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.24,0.48,0.48}{##1}}}

\def\PYZbs{\char`\\}
\def\PYZus{\char`\_}
\def\PYZob{\char`\{}
\def\PYZcb{\char`\}}
\def\PYZca{\char`\^}
\def\PYZam{\char`\&}
\def\PYZlt{\char`\<}
\def\PYZgt{\char`\>}
\def\PYZsh{\char`\#}
\def\PYZpc{\char`\%}
\def\PYZdl{\char`\$}
\def\PYZhy{\char`\-}
\def\PYZsq{\char`\'}
\def\PYZdq{\char`\"}
\def\PYZti{\char`\~}
% for compatibility with earlier versions
\def\PYZat{@}
\def\PYZlb{[}
\def\PYZrb{]}
\makeatother


    % For linebreaks inside Verbatim environment from package fancyvrb.
    \makeatletter
        \newbox\Wrappedcontinuationbox
        \newbox\Wrappedvisiblespacebox
        \newcommand*\Wrappedvisiblespace {\textcolor{red}{\textvisiblespace}}
        \newcommand*\Wrappedcontinuationsymbol {\textcolor{red}{\llap{\tiny$\m@th\hookrightarrow$}}}
        \newcommand*\Wrappedcontinuationindent {3ex }
        \newcommand*\Wrappedafterbreak {\kern\Wrappedcontinuationindent\copy\Wrappedcontinuationbox}
        % Take advantage of the already applied Pygments mark-up to insert
        % potential linebreaks for TeX processing.
        %        {, <, #, %, $, ' and ": go to next line.
        %        _, }, ^, &, >, - and ~: stay at end of broken line.
        % Use of \textquotesingle for straight quote.
        \newcommand*\Wrappedbreaksatspecials {%
            \def\PYGZus{\discretionary{\char`\_}{\Wrappedafterbreak}{\char`\_}}%
            \def\PYGZob{\discretionary{}{\Wrappedafterbreak\char`\{}{\char`\{}}%
            \def\PYGZcb{\discretionary{\char`\}}{\Wrappedafterbreak}{\char`\}}}%
            \def\PYGZca{\discretionary{\char`\^}{\Wrappedafterbreak}{\char`\^}}%
            \def\PYGZam{\discretionary{\char`\&}{\Wrappedafterbreak}{\char`\&}}%
            \def\PYGZlt{\discretionary{}{\Wrappedafterbreak\char`\<}{\char`\<}}%
            \def\PYGZgt{\discretionary{\char`\>}{\Wrappedafterbreak}{\char`\>}}%
            \def\PYGZsh{\discretionary{}{\Wrappedafterbreak\char`\#}{\char`\#}}%
            \def\PYGZpc{\discretionary{}{\Wrappedafterbreak\char`\%}{\char`\%}}%
            \def\PYGZdl{\discretionary{}{\Wrappedafterbreak\char`\$}{\char`\$}}%
            \def\PYGZhy{\discretionary{\char`\-}{\Wrappedafterbreak}{\char`\-}}%
            \def\PYGZsq{\discretionary{}{\Wrappedafterbreak\textquotesingle}{\textquotesingle}}%
            \def\PYGZdq{\discretionary{}{\Wrappedafterbreak\char`\"}{\char`\"}}%
            \def\PYGZti{\discretionary{\char`\~}{\Wrappedafterbreak}{\char`\~}}%
        }
        % Some characters . , ; ? ! / are not pygmentized.
        % This macro makes them "active" and they will insert potential linebreaks
        \newcommand*\Wrappedbreaksatpunct {%
            \lccode`\~`\.\lowercase{\def~}{\discretionary{\hbox{\char`\.}}{\Wrappedafterbreak}{\hbox{\char`\.}}}%
            \lccode`\~`\,\lowercase{\def~}{\discretionary{\hbox{\char`\,}}{\Wrappedafterbreak}{\hbox{\char`\,}}}%
            \lccode`\~`\;\lowercase{\def~}{\discretionary{\hbox{\char`\;}}{\Wrappedafterbreak}{\hbox{\char`\;}}}%
            \lccode`\~`\:\lowercase{\def~}{\discretionary{\hbox{\char`\:}}{\Wrappedafterbreak}{\hbox{\char`\:}}}%
            \lccode`\~`\?\lowercase{\def~}{\discretionary{\hbox{\char`\?}}{\Wrappedafterbreak}{\hbox{\char`\?}}}%
            \lccode`\~`\!\lowercase{\def~}{\discretionary{\hbox{\char`\!}}{\Wrappedafterbreak}{\hbox{\char`\!}}}%
            \lccode`\~`\/\lowercase{\def~}{\discretionary{\hbox{\char`\/}}{\Wrappedafterbreak}{\hbox{\char`\/}}}%
            \catcode`\.\active
            \catcode`\,\active
            \catcode`\;\active
            \catcode`\:\active
            \catcode`\?\active
            \catcode`\!\active
            \catcode`\/\active
            \lccode`\~`\~
        }
    \makeatother

    \let\OriginalVerbatim=\Verbatim
    \makeatletter
    \renewcommand{\Verbatim}[1][1]{%
        %\parskip\z@skip
        \sbox\Wrappedcontinuationbox {\Wrappedcontinuationsymbol}%
        \sbox\Wrappedvisiblespacebox {\FV@SetupFont\Wrappedvisiblespace}%
        \def\FancyVerbFormatLine ##1{\hsize\linewidth
            \vtop{\raggedright\hyphenpenalty\z@\exhyphenpenalty\z@
                \doublehyphendemerits\z@\finalhyphendemerits\z@
                \strut ##1\strut}%
        }%
        % If the linebreak is at a space, the latter will be displayed as visible
        % space at end of first line, and a continuation symbol starts next line.
        % Stretch/shrink are however usually zero for typewriter font.
        \def\FV@Space {%
            \nobreak\hskip\z@ plus\fontdimen3\font minus\fontdimen4\font
            \discretionary{\copy\Wrappedvisiblespacebox}{\Wrappedafterbreak}
            {\kern\fontdimen2\font}%
        }%

        % Allow breaks at special characters using \PYG... macros.
        \Wrappedbreaksatspecials
        % Breaks at punctuation characters . , ; ? ! and / need catcode=\active
        \OriginalVerbatim[#1,codes*=\Wrappedbreaksatpunct]%
    }
    \makeatother

    % Exact colors from NB
    \definecolor{incolor}{HTML}{303F9F}
    \definecolor{outcolor}{HTML}{D84315}
    \definecolor{cellborder}{HTML}{CFCFCF}
    \definecolor{cellbackground}{HTML}{F7F7F7}

    % prompt
    \makeatletter
    \newcommand{\boxspacing}{\kern\kvtcb@left@rule\kern\kvtcb@boxsep}
    \makeatother
    \newcommand{\prompt}[4]{
        {\ttfamily\llap{{\color{#2}[#3]:\hspace{3pt}#4}}\vspace{-\baselineskip}}
    }
    

    
    % Prevent overflowing lines due to hard-to-break entities
    \sloppy
    % Setup hyperref package
    \hypersetup{
      breaklinks=true,  % so long urls are correctly broken across lines
      colorlinks=true,
      urlcolor=urlcolor,
      linkcolor=linkcolor,
      citecolor=citecolor,
      }
    % Slightly bigger margins than the latex defaults
    
    \geometry{verbose,tmargin=1in,bmargin=1in,lmargin=1in,rmargin=1in}
    
    \usepackage{fancyhdr}
    \pagestyle{fancy}
    \fancyhf{} % Clear all header and footer fields
    \fancyhead[R]{\thepage} % Place the page number in the top right corner
    \renewcommand{\headrulewidth}{0pt} % Remove the header rule   
    \setcounter{page}{9} 

\begin{document} 
    
    
    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{1}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{c+c1}{\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}}
\PY{c+c1}{\PYZsh{} MSDS 442: AI Agent Design and Development}
\PY{c+c1}{\PYZsh{} Spring \PYZsq{}25}
\PY{c+c1}{\PYZsh{} Dr. Bader}
\PY{c+c1}{\PYZsh{}}
\PY{c+c1}{\PYZsh{} Assignment 4 \PYZhy{} Northwestern Memorial â€“ Healthcare Agent}
\PY{c+c1}{\PYZsh{} }
\PY{c+c1}{\PYZsh{} Kevin Geidel}
\PY{c+c1}{\PYZsh{}}
\PY{c+c1}{\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}\PYZsh{}}

\PY{c+c1}{\PYZsh{} OBJECTIVE:}
\PY{c+c1}{\PYZsh{}   The following will construct multiple AI agents using the LangChain \PYZam{} LangGraph frameworks. }
\PY{c+c1}{\PYZsh{}   The agents will represent different departments of Northwestern Memorial Hospital.}
\PY{c+c1}{\PYZsh{}   They will coordinate, synchronize, and act to answer patients\PYZsq{}/visitors\PYZsq{} questions.}

\PY{c+c1}{\PYZsh{} Load environment variables}
\PY{k+kn}{from}\PY{+w}{ }\PY{n+nn}{dotenv}\PY{+w}{ }\PY{k+kn}{import} \PY{n}{load\PYZus{}dotenv}
\PY{n}{load\PYZus{}dotenv}\PY{p}{(}\PY{p}{)}

\PY{c+c1}{\PYZsh{} Python native imports}
\PY{k+kn}{import}\PY{+w}{ }\PY{n+nn}{os}\PY{o}{,}\PY{+w}{ }\PY{n+nn}{textwrap}\PY{o}{,}\PY{+w}{ }\PY{n+nn}{json}

\PY{c+c1}{\PYZsh{} 3rd party package imports}
\PY{k+kn}{from}\PY{+w}{ }\PY{n+nn}{IPython}\PY{n+nn}{.}\PY{n+nn}{display}\PY{+w}{ }\PY{k+kn}{import} \PY{n}{display}\PY{p}{,} \PY{n}{Image}
\PY{k+kn}{from}\PY{+w}{ }\PY{n+nn}{typing}\PY{+w}{ }\PY{k+kn}{import} \PY{n}{Annotated}\PY{p}{,} \PY{n}{Sequence}
\PY{k+kn}{from}\PY{+w}{ }\PY{n+nn}{typing\PYZus{}extensions}\PY{+w}{ }\PY{k+kn}{import} \PY{n}{TypedDict}
\PY{k+kn}{from}\PY{+w}{ }\PY{n+nn}{langgraph}\PY{n+nn}{.}\PY{n+nn}{graph}\PY{+w}{ }\PY{k+kn}{import} \PY{n}{StateGraph}\PY{p}{,} \PY{n}{START}\PY{p}{,} \PY{n}{END}
\PY{k+kn}{from}\PY{+w}{ }\PY{n+nn}{langgraph}\PY{n+nn}{.}\PY{n+nn}{checkpoint}\PY{n+nn}{.}\PY{n+nn}{memory}\PY{+w}{ }\PY{k+kn}{import} \PY{n}{MemorySaver}
\PY{k+kn}{from}\PY{+w}{ }\PY{n+nn}{langchain\PYZus{}core}\PY{n+nn}{.}\PY{n+nn}{messages}\PY{+w}{ }\PY{k+kn}{import} \PY{n}{BaseMessage}\PY{p}{,} \PY{n}{HumanMessage}\PY{p}{,} \PY{n}{SystemMessage}
\PY{k+kn}{from}\PY{+w}{ }\PY{n+nn}{langchain\PYZus{}openai}\PY{+w}{ }\PY{k+kn}{import} \PY{n}{ChatOpenAI}

\PY{c+c1}{\PYZsh{} Assign experiment\PYZhy{}wide variables}
\PY{n}{model\PYZus{}name} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{gpt\PYZhy{}4o\PYZhy{}mini}\PY{l+s+s1}{\PYZsq{}}
\PY{n}{data\PYZus{}dir} \PY{o}{=} \PY{n}{os}\PY{o}{.}\PY{n}{path}\PY{o}{.}\PY{n}{join}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{reports}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Assignment\PYZus{}4}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{knowledge\PYZus{}base\PYZus{}dir} \PY{o}{=} \PY{n}{os}\PY{o}{.}\PY{n}{path}\PY{o}{.}\PY{n}{join}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{knowledge\PYZus{}base}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}
\clearpage
    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{2}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{c+c1}{\PYZsh{} Requirement 1: Define the structure of agent state for the LangGraph}
\PY{k}{class}\PY{+w}{ }\PY{n+nc}{InquiryState}\PY{p}{(}\PY{n}{TypedDict}\PY{p}{)}\PY{p}{:}
    \PY{n}{inquiry}\PY{p}{:} \PY{n+nb}{str}
    \PY{n}{referring\PYZus{}node}\PY{p}{:} \PY{n+nb}{str}
    \PY{n}{next\PYZus{}node}\PY{p}{:} \PY{n+nb}{str}
    \PY{n}{response}\PY{p}{:} \PY{n+nb}{str}
    \PY{n}{messages}\PY{p}{:} \PY{n}{Annotated}\PY{p}{[}\PY{n}{Sequence}\PY{p}{[}\PY{n}{BaseMessage}\PY{p}{]}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{List of messages in the conversation}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{3}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{c+c1}{\PYZsh{} Establish the AI client}
\PY{n}{llm} \PY{o}{=} \PY{n}{ChatOpenAI}\PY{p}{(}\PY{n}{model}\PY{o}{=}\PY{n}{model\PYZus{}name}\PY{p}{,} \PY{n}{temperature}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{)} 
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{4}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{c+c1}{\PYZsh{} Define utils needed by the agents}

\PY{k}{def}\PY{+w}{ }\PY{n+nf}{load\PYZus{}knowledge\PYZus{}base}\PY{p}{(}\PY{n}{filename}\PY{p}{)}\PY{p}{:}
    \PY{c+c1}{\PYZsh{} Extract inquires and responses from the JSON format knowledge base}
    \PY{n}{full\PYZus{}path} \PY{o}{=} \PY{n}{os}\PY{o}{.}\PY{n}{path}\PY{o}{.}\PY{n}{join}\PY{p}{(}\PY{n}{knowledge\PYZus{}base\PYZus{}dir}\PY{p}{,} \PY{n}{filename}\PY{p}{)}
    \PY{k}{with} \PY{n+nb}{open}\PY{p}{(}\PY{n}{full\PYZus{}path}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{r}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)} \PY{k}{as} \PY{n}{file}\PY{p}{:}
        \PY{n}{data} \PY{o}{=} \PY{n}{json}\PY{o}{.}\PY{n}{load}\PY{p}{(}\PY{n}{file}\PY{p}{)}
    \PY{k}{return} \PY{n+nb}{str}\PY{p}{(}\PY{n}{data}\PY{p}{)}

\PY{k}{def}\PY{+w}{ }\PY{n+nf}{get\PYZus{}query\PYZus{}from\PYZus{}inquiry}\PY{p}{(}\PY{n}{inquiry}\PY{p}{,} \PY{n}{messages}\PY{o}{=}\PY{k+kc}{None}\PY{p}{)}\PY{p}{:}
    \PY{n}{prompt\PYZus{}str} \PY{o}{=} \PY{l+s+sa}{f}\PY{l+s+s2}{\PYZdq{}\PYZdq{}\PYZdq{}}\PY{l+s+s2}{Provide an answer for following user}\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{s inquiry: }\PY{l+s+s2}{\PYZsq{}}\PY{l+s+si}{\PYZob{}}\PY{n}{inquiry}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{ using the knowledge\PYZus{}base.}\PY{l+s+s2}{\PYZdq{}\PYZdq{}\PYZdq{}}
    \PY{k}{if} \PY{n}{messages}\PY{p}{:}
        \PY{n}{history} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s2}{\PYZdq{}}\PY{o}{.}\PY{n}{join}\PY{p}{(}\PY{p}{[}\PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+si}{\PYZob{}}\PY{n}{msg}\PY{o}{.}\PY{n}{type}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{: }\PY{l+s+si}{\PYZob{}}\PY{n}{msg}\PY{o}{.}\PY{n}{content}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZsq{}} \PY{k}{for} \PY{n}{msg} \PY{o+ow}{in} \PY{n}{messages}\PY{p}{]}\PY{p}{[}\PY{p}{:}\PY{l+m+mi}{5}\PY{p}{]}\PY{p}{)}
        \PY{n}{prompt\PYZus{}str} \PY{o}{+}\PY{o}{=} \PY{l+s+sa}{f}\PY{l+s+s2}{\PYZdq{}\PYZdq{}\PYZdq{}}\PY{l+s+se}{\PYZbs{}n}\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s2}{Conversation history for context:}\PY{l+s+se}{\PYZbs{}n}\PY{l+s+se}{\PYZbs{}n}\PY{l+s+si}{\PYZob{}}\PY{n}{history}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s2}{\PYZdq{}\PYZdq{}\PYZdq{}}
    \PY{k}{return} \PY{n}{prompt\PYZus{}str}

\PY{k}{def}\PY{+w}{ }\PY{n+nf}{get\PYZus{}human\PYZus{}message\PYZus{}for\PYZus{}agent}\PY{p}{(}\PY{n}{state}\PY{p}{)}\PY{p}{:}
    \PY{c+c1}{\PYZsh{} Return the \PYZdq{}HumanMessage\PYZdq{} that forwards the user\PYZsq{}s inquiry (or last agent\PYZsq{}s inquiry) to the next agent}
    \PY{k}{return} \PY{n}{HumanMessage}\PY{p}{(}
            \PY{n}{content}\PY{o}{=}\PY{p}{[}
                \PY{p}{\PYZob{}}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{type}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{text}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{text}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:} \PY{n}{get\PYZus{}query\PYZus{}from\PYZus{}inquiry}\PY{p}{(}\PY{n}{state}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{inquiry}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{state}\PY{o}{.}\PY{n}{get}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{messages}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{p}{[}\PY{p}{]}\PY{p}{)}\PY{p}{)}\PY{p}{\PYZcb{}}\PY{p}{,}
            \PY{p}{]}\PY{p}{,}
        \PY{p}{)}

\PY{k}{def}\PY{+w}{ }\PY{n+nf}{get\PYZus{}system\PYZus{}message\PYZus{}for\PYZus{}agent}\PY{p}{(}\PY{n}{knowledge\PYZus{}base\PYZus{}filename}\PY{p}{,} \PY{n}{department}\PY{o}{=}\PY{k+kc}{None}\PY{p}{)}\PY{p}{:}
    \PY{k}{return} \PY{n}{SystemMessage}\PY{p}{(}
        \PY{n}{content}\PY{o}{=}\PY{l+s+sa}{f}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{You are a helpful assistant for the }\PY{l+s+si}{\PYZob{}}\PY{n}{department}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s2}{ department at Northwestern Memorial Hospital. Answer the user}\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{s inquiry based solely on the answers you have in this knowledge\PYZus{}base: }\PY{l+s+si}{\PYZob{}}\PY{n}{load\PYZus{}knowledge\PYZus{}base}\PY{p}{(}\PY{n}{knowledge\PYZus{}base\PYZus{}filename}\PY{p}{)}\PY{l+s+si}{\PYZcb{}}\PY{l+s+se}{\PYZbs{}n}\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s2}{Use the conversation history to provide contextually relevant responses. If the user says }\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{quit}\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{ or indicates the conversation is complete, respond appropriately and signal the end. Otherwise, continue the conversation within the }\PY{l+s+si}{\PYZob{}}\PY{n}{department}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s2}{ department.}\PY{l+s+s2}{\PYZdq{}}
    \PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{5}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{def}\PY{+w}{ }\PY{n+nf}{operator\PYZus{}router}\PY{p}{(}\PY{n}{state}\PY{p}{)}\PY{p}{:}
    \PY{n}{inquiry} \PY{o}{=} \PY{n}{state}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{inquiry}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{lower}\PY{p}{(}\PY{p}{)}
    \PY{n}{messages} \PY{o}{=} \PY{n}{state}\PY{o}{.}\PY{n}{get}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{messages}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{p}{[}\PY{p}{]}\PY{p}{)}
    
    \PY{c+c1}{\PYZsh{} Check for end of conversation}
    \PY{k}{if} \PY{n}{inquiry} \PY{o+ow}{in} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{q}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{quit}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{:}
        \PY{k}{return} \PY{p}{\PYZob{}}
            \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{inquiry}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:} \PY{n}{state}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{inquiry}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{,}
            \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{referring\PYZus{}node}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Operator}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}
            \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{next\PYZus{}node}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:} \PY{n}{END}\PY{p}{,}
            \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{response}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Goodbye! Thank you for contacting Northwestern Memorial!}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}
            \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{messages}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:} \PY{n}{messages} \PY{o}{+} \PY{p}{[}\PY{n}{HumanMessage}\PY{p}{(}\PY{n}{content}\PY{o}{=}\PY{n}{inquiry}\PY{p}{)}\PY{p}{,} \PY{n}{SystemMessage}\PY{p}{(}\PY{n}{content}\PY{o}{=}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Conversation ended by user.}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}\PY{p}{]}            
        \PY{p}{\PYZcb{}}
    
    \PY{c+c1}{\PYZsh{} Check for an ongoing conversation}
    \PY{k}{if} \PY{n}{state}\PY{o}{.}\PY{n}{get}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{referring\PYZus{}node}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)} \PY{o}{!=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Operator}\PY{l+s+s2}{\PYZdq{}} \PY{o+ow}{and} \PY{n}{state}\PY{o}{.}\PY{n}{get}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{next\PYZus{}node}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{:}
        \PY{n}{history} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s2}{\PYZdq{}}\PY{o}{.}\PY{n}{join}\PY{p}{(}\PY{p}{[}\PY{l+s+sa}{f}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+si}{\PYZob{}}\PY{n}{msg}\PY{o}{.}\PY{n}{type}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s2}{: }\PY{l+s+si}{\PYZob{}}\PY{n}{msg}\PY{o}{.}\PY{n}{content}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s2}{\PYZdq{}} \PY{k}{for} \PY{n}{msg} \PY{o+ow}{in} \PY{n}{messages}\PY{p}{]}\PY{p}{[}\PY{p}{:}\PY{l+m+mi}{5}\PY{p}{]}\PY{p}{)}
        \PY{n}{query} \PY{o}{=} \PY{l+s+sa}{f}\PY{l+s+s2}{\PYZdq{}\PYZdq{}\PYZdq{}}\PY{l+s+s2}{Given the conversation history and the new inquiry: }\PY{l+s+s2}{\PYZsq{}}\PY{l+s+si}{\PYZob{}}\PY{n}{inquiry}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{, determine if this is a follow\PYZhy{}up question related to the previous department (}\PY{l+s+si}{\PYZob{}}\PY{n}{state}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{referring\PYZus{}node}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s2}{) or a new topic. Return }\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{continue}\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{ if it}\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{s a follow\PYZhy{}up, or classify the intent for a new topic.}
\PY{l+s+s2}{        Possible intent values: Greeting, GeneralInquiry, ER, Radiology, PrimaryCare, Cardiology, Pediatrics, BillingInsurance}
\PY{l+s+s2}{        }
\PY{l+s+s2}{        Conversation history:}
\PY{l+s+s2}{        }\PY{l+s+si}{\PYZob{}}\PY{n}{history}\PY{l+s+si}{\PYZcb{}}
\PY{l+s+s2}{        }\PY{l+s+s2}{\PYZdq{}\PYZdq{}\PYZdq{}}
        \PY{n}{messages\PYZus{}for\PYZus{}intent} \PY{o}{=} \PY{p}{[}
            \PY{n}{SystemMessage}\PY{p}{(}\PY{n}{content}\PY{o}{=}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{You are a helpful assistant tasked with classifying the intent of a user}\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{s query or detecting follow\PYZhy{}ups.}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}\PY{p}{,}
            \PY{n}{HumanMessage}\PY{p}{(}\PY{n}{content}\PY{o}{=}\PY{p}{[}\PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{type}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{text}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{text}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{n}{query}\PY{p}{\PYZcb{}}\PY{p}{]}\PY{p}{)}
        \PY{p}{]}
        \PY{n}{response} \PY{o}{=} \PY{n}{llm}\PY{o}{.}\PY{n}{invoke}\PY{p}{(}\PY{n}{messages\PYZus{}for\PYZus{}intent}\PY{p}{)}
        \PY{n}{intent} \PY{o}{=} \PY{n}{response}\PY{o}{.}\PY{n}{content}\PY{o}{.}\PY{n}{strip}\PY{p}{(}\PY{p}{)}
        \PY{k}{if} \PY{n}{intent} \PY{o}{==} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{continue}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}
            \PY{k}{return} \PY{p}{\PYZob{}}
                \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{inquiry}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:} \PY{n}{state}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{inquiry}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{,}
                \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{referring\PYZus{}node}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Operator}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}
                \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{next\PYZus{}node}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:} \PY{n}{state}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{referring\PYZus{}node}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,}
                \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{response}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:} \PY{l+s+sa}{f}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Continuing with the }\PY{l+s+si}{\PYZob{}}\PY{n}{state}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{referring\PYZus{}node}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s2}{ department.}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}
                \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{messages}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:} \PY{n}{messages} \PY{o}{+} \PY{p}{[}\PY{n}{HumanMessage}\PY{p}{(}\PY{n}{content}\PY{o}{=}\PY{n}{inquiry}\PY{p}{)}\PY{p}{]}            
            \PY{p}{\PYZcb{}}            

    \PY{c+c1}{\PYZsh{} This is a new conversation. Have the operator decide how to route.}
    \PY{n}{query} \PY{o}{=} \PY{l+s+sa}{f}\PY{l+s+s2}{\PYZdq{}\PYZdq{}\PYZdq{}}\PY{l+s+s2}{Classify the user}\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{s intents based on the following input: }\PY{l+s+s2}{\PYZsq{}}\PY{l+s+si}{\PYZob{}}\PY{n}{state}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{inquiry}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{. }
\PY{l+s+s2}{            List of possible intent values: Greeting, GeneralInquiry, ER, Radiology, PrimaryCare, Cardiology, Pediatrics, BillingInsurance}
\PY{l+s+s2}{            Return only the intent value of the inquiry identified with no extra text or characters}\PY{l+s+s2}{\PYZdq{}\PYZdq{}\PYZdq{}}
    \PY{n}{messages} \PY{o}{=} \PY{p}{[}
        \PY{n}{SystemMessage}\PY{p}{(}\PY{n}{content}\PY{o}{=}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{You are a helpful assistant tasked with classifying the intent of user}\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{s inquiry}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}\PY{p}{,}
        \PY{n}{HumanMessage}\PY{p}{(}\PY{n}{content}\PY{o}{=}\PY{p}{[}\PY{p}{\PYZob{}}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{type}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{text}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{text}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:} \PY{n}{query}\PY{p}{\PYZcb{}}\PY{p}{]}\PY{p}{)}\PY{p}{,}
    \PY{p}{]}
    \PY{n}{response} \PY{o}{=} \PY{n}{llm}\PY{o}{.}\PY{n}{invoke}\PY{p}{(}\PY{n}{messages}\PY{p}{)}
    \PY{n}{intent} \PY{o}{=} \PY{n}{response}\PY{o}{.}\PY{n}{content}\PY{o}{.}\PY{n}{strip}\PY{p}{(}\PY{p}{)}
            
    \PY{n}{response\PYZus{}lower} \PY{o}{=} \PY{n}{intent}\PY{o}{.}\PY{n}{lower}\PY{p}{(}\PY{p}{)}
    
    \PY{k}{if} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{greeting}\PY{l+s+s2}{\PYZdq{}} \PY{o+ow}{in} \PY{n}{response\PYZus{}lower}\PY{p}{:}
        \PY{n}{response} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Hello there, This is Northwestern Memorial Hospital, How can I assist you today?}\PY{l+s+s2}{\PYZdq{}}
        \PY{n}{next\PYZus{}node} \PY{o}{=} \PY{n}{END}
    \PY{k}{elif} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{generalinquiry}\PY{l+s+s2}{\PYZdq{}} \PY{o+ow}{in} \PY{n}{response\PYZus{}lower}\PY{p}{:}
        \PY{n}{response} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{For general informtion about nearby parking, hotels and restaurants, please visit https://www.nm.org/ and navigate to Patients \PYZam{} Visitors link }\PY{l+s+s2}{\PYZdq{}}
        \PY{n}{next\PYZus{}node} \PY{o}{=} \PY{n}{END}
    \PY{k}{else}\PY{p}{:}
        \PY{n}{response} \PY{o}{=} \PY{l+s+sa}{f}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Let me forward your query to our }\PY{l+s+si}{\PYZob{}}\PY{n}{intent}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s2}{ agent.}\PY{l+s+s2}{\PYZdq{}}
        \PY{n}{next\PYZus{}node} \PY{o}{=} \PY{n}{intent}

    \PY{k}{return} \PY{p}{\PYZob{}}
        \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{inquiry}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:} \PY{n}{state}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{inquiry}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{,}
        \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{referring\PYZus{}node}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Operator}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}
        \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{next\PYZus{}node}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:} \PY{n}{next\PYZus{}node}\PY{p}{,}
        \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{response}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:} \PY{n}{response}\PY{p}{,}
    \PY{p}{\PYZcb{}}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{6}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{def}\PY{+w}{ }\PY{n+nf}{department\PYZus{}specific\PYZus{}agent}\PY{p}{(}\PY{n}{state}\PY{p}{,} \PY{n}{department\PYZus{}node\PYZus{}name}\PY{p}{,} \PY{n}{knowledge\PYZus{}base\PYZus{}filename}\PY{p}{)}\PY{p}{:}
    \PY{c+c1}{\PYZsh{} Handle inquires related to the passed department}
    \PY{n}{inquiry} \PY{o}{=} \PY{n}{state}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{inquiry}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{lower}\PY{p}{(}\PY{p}{)}
    \PY{n}{messages} \PY{o}{=} \PY{n}{state}\PY{o}{.}\PY{n}{get}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{messages}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{p}{[}\PY{p}{]}\PY{p}{)}

    \PY{c+c1}{\PYZsh{} Check for end of conversation}
    \PY{k}{if} \PY{n}{inquiry} \PY{o+ow}{in} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{q}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{quit}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{:}
        \PY{k}{return} \PY{p}{\PYZob{}}
            \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{inquiry}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:} \PY{n}{state}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{inquiry}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{,}
            \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{referring\PYZus{}node}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:} \PY{n}{department\PYZus{}node\PYZus{}name}\PY{p}{,}
            \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{next\PYZus{}node}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:} \PY{n}{END}\PY{p}{,}
            \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{response}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:} \PY{l+s+sa}{f}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Goodbye! Thank you for contacting }\PY{l+s+si}{\PYZob{}}\PY{n}{department\PYZus{}node\PYZus{}name}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s2}{ at Northwestern Memorial!}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}
            \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{messages}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:} \PY{n}{messages} \PY{o}{+} \PY{p}{[}\PY{n}{HumanMessage}\PY{p}{(}\PY{n}{content}\PY{o}{=}\PY{n}{inquiry}\PY{p}{)}\PY{p}{,} \PY{n}{SystemMessage}\PY{p}{(}\PY{n}{content}\PY{o}{=}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Conversation ended by user.}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}\PY{p}{]}            
        \PY{p}{\PYZcb{}}
    
    \PY{k}{if} \PY{n}{state}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{referring\PYZus{}node}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{==} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Operator}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}
        \PY{c+c1}{\PYZsh{} This is first pass at the department agent, include the system message}
        \PY{n}{messages} \PY{o}{+}\PY{o}{=} \PY{p}{[}\PY{n}{get\PYZus{}system\PYZus{}message\PYZus{}for\PYZus{}agent}\PY{p}{(}\PY{n}{knowledge\PYZus{}base\PYZus{}filename}\PY{p}{)}\PY{p}{]}\PY{o}{+}
        \PY{p}{[}\PY{n}{get\PYZus{}human\PYZus{}message\PYZus{}for\PYZus{}agent}\PY{p}{(}\PY{n}{state}\PY{p}{)}\PY{p}{]}
    \PY{k}{else}\PY{p}{:}
        \PY{c+c1}{\PYZsh{} This is an ongoing conversation. Just append new inquiry}
        \PY{n}{messages} \PY{o}{+}\PY{o}{=} \PY{p}{[}\PY{n}{get\PYZus{}human\PYZus{}message\PYZus{}for\PYZus{}agent}\PY{p}{(}\PY{n}{state}\PY{p}{)}\PY{p}{]}

    \PY{n}{response} \PY{o}{=} \PY{n}{llm}\PY{o}{.}\PY{n}{invoke}\PY{p}{(}\PY{n}{messages}\PY{p}{)}
    \PY{n}{formatted\PYZus{}response} \PY{o}{=} \PY{l+s+sa}{f}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+si}{\PYZob{}}\PY{n}{department\PYZus{}node\PYZus{}name}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s2}{:: }\PY{l+s+s2}{\PYZdq{}} \PY{o}{+} \PY{n}{response}\PY{o}{.}\PY{n}{content}\PY{o}{.}\PY{n}{strip}\PY{p}{(}\PY{p}{)}

    \PY{c+c1}{\PYZsh{} Check if conversation is over (next\PYZus{}node=END) or not (next\PYZus{}node=same department)}
    \PY{n}{completion\PYZus{}check} \PY{o}{=} \PY{n}{llm}\PY{o}{.}\PY{n}{invoke}\PY{p}{(}\PY{p}{[}
        \PY{n}{SystemMessage}\PY{p}{(}\PY{n}{content}\PY{o}{=}\PY{l+s+sa}{f}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Determine if the user}\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{s inquiry is fully resolved based on the response: }\PY{l+s+s2}{\PYZsq{}}\PY{l+s+si}{\PYZob{}}\PY{n}{response}\PY{o}{.}\PY{n}{content}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{.}\PY{l+s+se}{\PYZbs{}n}\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s2}{Return }\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{complete}\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{ if resolved, }\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{continue}\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{ if further interaction is needed.}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}\PY{p}{,}
        \PY{n}{HumanMessage}\PY{p}{(}\PY{n}{content}\PY{o}{=}\PY{p}{[}\PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{type}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{text}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{text}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+s+sa}{f}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Response: }\PY{l+s+si}{\PYZob{}}\PY{n}{response}\PY{o}{.}\PY{n}{content}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{\PYZcb{}}\PY{p}{]}\PY{p}{)}
    \PY{p}{]}\PY{p}{)}
    \PY{n}{next\PYZus{}node} \PY{o}{=} \PY{n}{END} \PY{k}{if} \PY{n}{completion\PYZus{}check}\PY{o}{.}\PY{n}{content}\PY{o}{.}\PY{n}{strip}\PY{p}{(}\PY{p}{)} \PY{o}{==} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{continue}\PY{l+s+s1}{\PYZsq{}} \PY{k}{else} \PY{n}{department\PYZus{}node\PYZus{}name}

    \PY{k}{return} \PY{p}{\PYZob{}}
        \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{input}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:} \PY{n}{state}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{inquiry}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{,}
        \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{referring\PYZus{}node}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:} \PY{n}{department\PYZus{}node\PYZus{}name}\PY{p}{,}
        \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{next\PYZus{}node}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:} \PY{n}{next\PYZus{}node}\PY{p}{,} 
        \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{response}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:} \PY{n}{formatted\PYZus{}response}\PY{p}{,}
        \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{messages}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:} \PY{n}{messages} \PY{o}{+} \PY{p}{[}\PY{n}{SystemMessage}\PY{p}{(}\PY{n}{content}\PY{o}{=}\PY{n}{formatted\PYZus{}response}\PY{p}{)}\PY{p}{]}
    \PY{p}{\PYZcb{}}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{7}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{def}\PY{+w}{ }\PY{n+nf}{er\PYZus{}agent}\PY{p}{(}\PY{n}{state}\PY{p}{)}\PY{p}{:}
    \PY{c+c1}{\PYZsh{} Handle inquires related to the ER department}
    \PY{k}{return} \PY{n}{department\PYZus{}specific\PYZus{}agent}\PY{p}{(}\PY{n}{state}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ER}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{emergency.json}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{8}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{def}\PY{+w}{ }\PY{n+nf}{radiology\PYZus{}agent}\PY{p}{(}\PY{n}{state}\PY{p}{)}\PY{p}{:}
    \PY{c+c1}{\PYZsh{} Handle inquires related to the Radiology department}
    \PY{k}{return} \PY{n}{department\PYZus{}specific\PYZus{}agent}\PY{p}{(}\PY{n}{state}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Radiology}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{radiology.json}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{9}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{def}\PY{+w}{ }\PY{n+nf}{primary\PYZus{}care\PYZus{}agent}\PY{p}{(}\PY{n}{state}\PY{p}{)}\PY{p}{:}
    \PY{c+c1}{\PYZsh{} Handle inquires related to the PrimaryCare department}
    \PY{k}{return} \PY{n}{department\PYZus{}specific\PYZus{}agent}\PY{p}{(}\PY{n}{state}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{PrimaryCare}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{primary\PYZus{}care.json}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{10}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{def}\PY{+w}{ }\PY{n+nf}{cardiology\PYZus{}agent}\PY{p}{(}\PY{n}{state}\PY{p}{)}\PY{p}{:}
    \PY{c+c1}{\PYZsh{} Handle inquires related to the Cardiology department}
    \PY{k}{return} \PY{n}{department\PYZus{}specific\PYZus{}agent}\PY{p}{(}\PY{n}{state}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Cardiology}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{cardiology.json}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{11}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{def}\PY{+w}{ }\PY{n+nf}{pediatrics\PYZus{}agent}\PY{p}{(}\PY{n}{state}\PY{p}{)}\PY{p}{:}
    \PY{c+c1}{\PYZsh{} Handle inquires related to the Pediatrics department}
    \PY{k}{return} \PY{n}{department\PYZus{}specific\PYZus{}agent}\PY{p}{(}\PY{n}{state}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Pediatrics}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{pediatrics.json}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{12}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{def}\PY{+w}{ }\PY{n+nf}{billing\PYZus{}agent}\PY{p}{(}\PY{n}{state}\PY{p}{)}\PY{p}{:}
    \PY{c+c1}{\PYZsh{} Handle inquires related to the BillingInsurance department}
    \PY{k}{return} \PY{n}{department\PYZus{}specific\PYZus{}agent}\PY{p}{(}\PY{n}{state}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{BillingInsurance}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{billing.json}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
    
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{13}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{builder} \PY{o}{=} \PY{n}{StateGraph}\PY{p}{(}\PY{n}{InquiryState}\PY{p}{)}

\PY{n}{builder}\PY{o}{.}\PY{n}{add\PYZus{}node}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Operator}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{operator\PYZus{}router}\PY{p}{)}
\PY{n}{builder}\PY{o}{.}\PY{n}{add\PYZus{}node}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{ER}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{er\PYZus{}agent}\PY{p}{)}
\PY{n}{builder}\PY{o}{.}\PY{n}{add\PYZus{}node}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Radiology}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{radiology\PYZus{}agent}\PY{p}{)}
\PY{n}{builder}\PY{o}{.}\PY{n}{add\PYZus{}node}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{PrimaryCare}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{primary\PYZus{}care\PYZus{}agent}\PY{p}{)}
\PY{n}{builder}\PY{o}{.}\PY{n}{add\PYZus{}node}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Cardiology}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{cardiology\PYZus{}agent}\PY{p}{)}
\PY{n}{builder}\PY{o}{.}\PY{n}{add\PYZus{}node}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Pediatrics}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{pediatrics\PYZus{}agent}\PY{p}{)}
\PY{n}{builder}\PY{o}{.}\PY{n}{add\PYZus{}node}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{BillingInsurance}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{billing\PYZus{}agent}\PY{p}{)}

\PY{n}{builder}\PY{o}{.}\PY{n}{set\PYZus{}entry\PYZus{}point}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Operator}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}

\PY{n}{builder}\PY{o}{.}\PY{n}{add\PYZus{}conditional\PYZus{}edges}\PY{p}{(}
    \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Operator}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}
    \PY{k}{lambda} \PY{n}{x}\PY{p}{:} \PY{n}{x}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{next\PYZus{}node}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{,}
    \PY{p}{\PYZob{}}
        \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{ER}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{ER}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}
        \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{PrimaryCare}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{PrimaryCare}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}
        \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Pediatrics}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Pediatrics}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}
        \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Radiology}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Radiology}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}
        \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Cardiology}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Cardiology}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}
        \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{BillingInsurance}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{BillingInsurance}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,}
        \PY{n}{END}\PY{p}{:} \PY{n}{END}
    \PY{p}{\PYZcb{}}
\PY{p}{)}

\PY{k}{for} \PY{n}{node} \PY{o+ow}{in} \PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{ER}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Radiology}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{PrimaryCare}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Cardiology}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Pediatrics}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{BillingInsurance}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{:}
    \PY{n}{builder}\PY{o}{.}\PY{n}{add\PYZus{}edge}\PY{p}{(}\PY{n}{node}\PY{p}{,} \PY{n}{END}\PY{p}{)}

    
\PY{n}{graph} \PY{o}{=} \PY{n}{builder}\PY{o}{.}\PY{n}{compile}\PY{p}{(}\PY{n}{checkpointer}\PY{o}{=}\PY{n}{MemorySaver}\PY{p}{(}\PY{p}{)}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{14}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{display}\PY{p}{(}\PY{n}{Image}\PY{p}{(}\PY{n}{graph}\PY{o}{.}\PY{n}{get\PYZus{}graph}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{draw\PYZus{}mermaid\PYZus{}png}\PY{p}{(}\PY{p}{)}\PY{p}{)}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{Assignment_04_NOTEBOOK_Geidel_files/Assignment_04_NOTEBOOK_Geidel_13_0.png}
    \end{center}

    \clearpage
    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{15}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{config} \PY{o}{=} \PY{p}{\PYZob{}}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{configurable}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:} \PY{p}{\PYZob{}}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{thread\PYZus{}id}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{1}\PY{l+s+s2}{\PYZdq{}}\PY{p}{\PYZcb{}}\PY{p}{\PYZcb{}}
\PY{k}{while} \PY{k+kc}{True}\PY{p}{:}
    \PY{n}{user\PYZus{}input} \PY{o}{=} \PY{n+nb}{input}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{User: }\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
    \PY{n+nb}{print}\PY{p}{(}\PY{l+s+sa}{f}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s2}{User:}\PY{l+s+se}{\PYZbs{}n}\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s2}{ }\PY{l+s+si}{\PYZob{}}\PY{n}{user\PYZus{}input}\PY{l+s+si}{\PYZcb{}}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
    \PY{k}{if} \PY{n}{user\PYZus{}input}\PY{o}{.}\PY{n}{lower}\PY{p}{(}\PY{p}{)} \PY{o+ow}{in} \PY{p}{\PYZob{}}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{q}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{quit}\PY{l+s+s2}{\PYZdq{}}\PY{p}{\PYZcb{}}\PY{p}{:}
        \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Goodbye!}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
        \PY{k}{break}
    \PY{n}{result} \PY{o}{=} \PY{n}{graph}\PY{o}{.}\PY{n}{invoke}\PY{p}{(}\PY{p}{\PYZob{}}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{inquiry}\PY{l+s+s2}{\PYZdq{}}\PY{p}{:} \PY{n}{user\PYZus{}input}\PY{p}{\PYZcb{}}\PY{p}{,} \PY{n}{config}\PY{o}{=}\PY{n}{config}\PY{p}{)}
    \PY{n}{response} \PY{o}{=} \PY{n}{result}\PY{o}{.}\PY{n}{get}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{response}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{No Response Returned}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
    \PY{n+nb}{print}\PY{p}{(}\PY{n}{response}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]

User:

 How should I prepare for a CT scan and are there any dietary restrictions?
Radiology:: For a CT scan, you should fast for 4-6 hours if contrast dye is
used; clear liquids may be allowed. It's important to remove metal objects and
wear loose clothing. During the scan, you will need to stay still. Additionally,
inform your doctor about any allergies or kidney issues. Be sure to follow any
specific instructions provided, as some scans may have no dietary restrictions.

User:

 Can I schdule an appointment for one?
Radiology:: To schedule an appointment for a CT scan, you will need a referral
from your physician. Please contact our scheduling department to confirm and
book your appointment.

User:

 How much will a CT scan cost?
Radiology:: I'm sorry, but I don't have information regarding the cost of a CT
scan. I recommend contacting our billing department or your insurance provider
for specific cost details. If you have any other questions, feel free to ask!

User:

 That is all for me, thank you.
Radiology:: You're welcome! If you have any more questions in the future or need
assistance, feel free to reach out. Have a great day!

User:

 q
Goodbye!
    \end{Verbatim}


    % Add a bibliography block to the postdoc
    
    
    
\end{document}
